(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ec43a19"],{"0b54":function(t,e,a){"use strict";a.d(e,"a",(function(){return o})),a.d(e,"d",(function(){return i})),a.d(e,"i",(function(){return n})),a.d(e,"f",(function(){return s})),a.d(e,"g",(function(){return c})),a.d(e,"c",(function(){return l})),a.d(e,"k",(function(){return u})),a.d(e,"b",(function(){return d})),a.d(e,"h",(function(){return f})),a.d(e,"e",(function(){return m})),a.d(e,"j",(function(){return p}));a("b0c0");var r=a("4279"),o=function(t){return Object(r["a"])("/api/mall/manager/goods/info/put",t,"POST")},i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])("/api/mall/manager/goods/info/list",{page:t.page,pageSize:t.pageSize,name:t.name,classId:t.classId,recommendType:t.recommendType},"POST")},n=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])("/api/mall/manager/goods/updateRecommendRank",{goodsId:t.goodsId,rank:t.rank,recommendType:t.recommendType},"POST")},s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])("/api/mall/manager/goods/recommend",{id:t.id,info:{recommendType:t.recommendType,begin_time:t.begin_time,end_time:t.end_time,rank:t.rank}},"POST")},c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])("/api/mall/manager/goods/recommendList",{page:t.page,pageSize:t.pageSize,name:t.name,classId:t.classId,recommendType:t.recommendType},"POST")},l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])("/api/mall/manager/goods/info/get",{id:t.id},"POST")},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])("/api/mall/manager/goods/sku/updateStatus",{id:t.id,status:t.status},"POST")},d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])("/api/mall/manager/goods/info/updateStatus",{id:t.id,status:t.status},"POST")},f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])("/api/mall/manager/goods/info/updateRank",{id:t.id,rank:t.rank},"POST")},m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])("/api/mall/manager/goods/skus",{id:t.id},"POST")},p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])("/api/mall/manager/goods/updateSkuStock",{list:t.list},"POST")}},"1f46":function(t,e,a){},"2b34":function(t,e,a){"use strict";var r=a("1f46"),o=a.n(r);o.a},"3df2":function(t,e,a){},"45b8":function(t,e,a){"use strict";a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n}));a("b0c0");var r=a("4279"),o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])("/api/mall/manager/goods/class/list",{isAll:t.isAll,token:t.token,page:t.page,pageSize:t.pageSize,name:t.name,id:t.id},"POST")},i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])("/api/mall/manager/goods/class/put",{item:{fatherId:t.fatherId,name:t.name,rank:t.rank,id:t.id}},"POST")},n=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])("/api/mall/manager/goods/class/updateStatus",{id:t.id,status:t.status},"POST")}},"45fc":function(t,e,a){"use strict";var r=a("23e7"),o=a("b727").some,i=a("b301");r({target:"Array",proto:!0,forced:i("some")},{some:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},"8e5c":function(t,e,a){"use strict";var r=a("3df2"),o=a.n(r);o.a},"8fdf":function(t,e,a){"use strict";a.d(e,"g",(function(){return o})),a.d(e,"d",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"f",(function(){return s})),a.d(e,"e",(function(){return c})),a.d(e,"a",(function(){return l})),a.d(e,"b",(function(){return u}));a("b0c0");var r=a("4279"),o=function(t,e,a){return Object(r["a"])("/api/mall/manager/goods/group/list",{page:t,pageSize:e,isAll:a},"POST")},i=function(t){var e=t.id,a=t.name,o=t.rank;return Object(r["a"])("/api/mall/manager/goods/group/put",{id:e,name:a,rank:o},"POST")},n=function(t){return Object(r["a"])("/api/mall/manager/goods/group/delete",{id:t},"POST")},s=function(t,e,a){return Object(r["a"])("/api/mall/manager/goods/info/list",{page:t,pageSize:e,groupId:a},"POST")},c=function(t){var e=t.name,a=t.includeGroupId,o=t.groupId,i=t.page,n=t.pageSize;return Object(r["a"])("/api/mall/manager/goods/group/searchGoods",{name:e,includeGroupId:a,groupId:o,page:i,pageSize:n},"POST")},l=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(r["a"])("/api/mall/manager/goods/group/inOutGoods",{goodsIds:t,groupId:e,isOut:a},"POST")},u=function(t){var e=t.goodsId,a=t.groupId,o=t.rank;return Object(r["a"])("/api/mall/manager/goods/group/updateGoodsRank",{goodsId:e,groupId:a,rank:o},"POST")}},a623:function(t,e,a){"use strict";var r=a("23e7"),o=a("b727").every,i=a("b301");r({target:"Array",proto:!0,forced:i("every")},{every:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},c51d:function(t,e,a){},ce20:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{staticClass:"layout"},[a("el-header",{staticClass:"goods-created-layout",attrs:{height:"31px"}},[t.routeData.query.path_?a("el-breadcrumb",[a("el-breadcrumb-item",{attrs:{to:{path:t.routeData.query.path_}}},[t._v(" "+t._s(t.routeData.query.title_)+" ")]),a("el-breadcrumb-item",[t._v(t._s(t.routeData.meta.title))])],1):t._e()],1),a("el-main",[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],ref:"goodsForm",staticClass:"from-layout",attrs:{rules:t.rules,size:"medium","label-position":"left",model:t.form}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"never","body-style":"border: 0;"}},[a("div",{staticClass:"from-layout-title",attrs:{slot:"header"},slot:"header"},[a("div",[t._v("商品信息")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){t.show1=!t.show1}}},[t._v(" "+t._s(t.show1?"收起":"展开")+" "),a("i",{class:[t.show1?"el-icon-arrow-up":"el-icon-arrow-down"],staticStyle:{"font-weight":"bolder"}})])],1),a("el-collapse-transition",[a("el-main",{directives:[{name:"show",rawName:"v-show",value:t.show1,expression:"show1"}],staticClass:"card-content"},[a("el-form-item",{attrs:{label:"商品分类",prop:"category"}},[a("el-cascader",{staticStyle:{width:"260px"},attrs:{"append-to-body":!1,filterable:"",clearable:"",props:{value:"id",label:"name",emitPath:!1},options:t.goodsCategoryList,"show-all-levels":!1,placeholder:"请选择商品分类"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.node,o=e.data;return[a("span",[t._v(t._s(o.name))]),r.isLeaf?t._e():a("span",[t._v(" ("+t._s(o.children.length)+") ")])]}}]),model:{value:t.form.category,callback:function(e){t.$set(t.form,"category",e)},expression:"form.category"}})],1),a("el-form-item",{attrs:{label:"商品名称",prop:"name"}},[a("el-input",{staticStyle:{width:"500px"},attrs:{clearable:"",placeholder:"请输入商品名称(2~50字符)"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"商品标签",prop:"tags"}},[a("template",{slot:"label"},[a("font",{attrs:{color:"#F56C6C"}},[t._v("*")]),t._v(" 商品标签 ")],1),a("el-select",{staticStyle:{width:"500px"},attrs:{"popper-append-to-body":!1,multiple:"",placeholder:"请选择商品标签(支持多选)"},model:{value:t.form.tags,callback:function(e){t.$set(t.form,"tags",e)},expression:"form.tags"}},t._l(t.goodsGroup,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,title:t.name,value:t.id}})})),1)],2),a("el-form-item",{attrs:{prop:"showPrice"}},[a("template",{slot:"label"},[a("font",{attrs:{color:"#F56C6C"}},[t._v("*")]),t._v(" 商品价格 ")],1),a("el-input",{staticStyle:{width:"260px"},attrs:{clearable:"",placeholder:"请输入商品售价(0~99999)"},model:{value:t.form.showPrice,callback:function(e){t.$set(t.form,"showPrice",e)},expression:"form.showPrice"}},[a("template",{slot:"append"},[t._v("元")])],2)],2),a("el-form-item",{attrs:{prop:"costPrice"}},[a("template",{slot:"label"},[a("font",{attrs:{color:"#F56C6C"}},[t._v("*")]),t._v(" 商品原价 ")],1),a("el-input",{staticStyle:{width:"260px"},attrs:{clearable:"",placeholder:"请输入商品原价(0~99999)"},model:{value:t.form.costPrice,callback:function(e){t.$set(t.form,"costPrice",e)},expression:"form.costPrice"}},[a("template",{slot:"append"},[t._v("元")])],2)],2),a("el-form-item",{attrs:{label:"商品描述",prop:"name"}},[a("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",maxlength:"100","show-word-limit":"",placeholder:"请输入商品描述"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),a("el-form-item",[a("template",{slot:"label"},[a("font",{attrs:{color:"#F56C6C"}},[t._v("*")]),t._v(" 上传主图 ")],1),a("image-upload",{attrs:{image:t.form.imgList,isMulti:!0},on:{"update:image":function(e){return t.$set(t.form,"imgList",e)}}})],2)],1)],1)],1),a("el-card",{staticClass:"box-card",attrs:{shadow:"never","body-style":"border: 0;"}},[a("div",{staticClass:"from-layout-title",attrs:{slot:"header"},slot:"header"},[a("div",[t._v("商品规格")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){t.show2=!t.show2}}},[t._v(" "+t._s(t.show2?"收起":"展开")+" "),a("i",{class:[t.show2?"el-icon-arrow-up":"el-icon-arrow-down"],staticStyle:{"font-weight":"bolder"}})])],1),a("el-collapse-transition",[a("el-main",{directives:[{name:"show",rawName:"v-show",value:t.show2,expression:"show2"}],staticClass:"card-content"},[a("goods-specifications",{ref:"specificationsData",attrs:{isEdit:t.isEdit,options:t.form.specificationsData,sku:t.form.sku},on:{"update:options":function(e){return t.$set(t.form,"specificationsData",e)}}})],1)],1)],1),a("el-card",{staticClass:"box-card",attrs:{shadow:"never","body-style":"border: 0;"}},[a("div",{staticClass:"from-layout-title",attrs:{slot:"header"},slot:"header"},[a("div",[t._v("运费信息")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){t.show2=!t.show2}}},[t._v(" "+t._s(t.show2?"收起":"展开")+" "),a("i",{class:[t.show2?"el-icon-arrow-up":"el-icon-arrow-down"],staticStyle:{"font-weight":"bolder"}})])],1),a("el-collapse-transition",[a("el-main",{directives:[{name:"show",rawName:"v-show",value:t.show2,expression:"show2"}],staticClass:"card-content"},[a("el-form",{ref:"goodsForm",staticClass:"from-layout",attrs:{rules:t.rules,size:"medium","label-position":"left",model:t.form}},[a("el-form-item",{attrs:{label:"运费模板",prop:"freightId"}},[a("el-select",{staticStyle:{width:"260px"},attrs:{"popper-append-to-body":!1,placeholder:"请选择运费模板"},model:{value:t.form.freightId,callback:function(e){t.$set(t.form,"freightId",e)},expression:"form.freightId"}},t._l(t.transf,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,title:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{prop:"weight"}},[a("template",{slot:"label"},[a("font",{attrs:{color:"#F56C6C"}},[t._v("*")]),t._v(" 物流重量 ")],1),a("el-input",{staticStyle:{width:"260px"},attrs:{min:0,clearable:"",placeholder:"请输入商品重量(含包装)"},model:{value:t.form.weight,callback:function(e){t.$set(t.form,"weight",e)},expression:"form.weight"}},[a("template",{slot:"append"},[t._v("Kg")])],2)],2)],1)],1)],1)],1),a("el-card",{staticClass:"box-card",attrs:{shadow:"never","body-style":"border: 0;"}},[a("div",{staticClass:"from-layout-title",attrs:{slot:"header"},slot:"header"},[a("div",[t._v("商品详情")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){t.show3=!t.show3}}},[t._v(" "+t._s(t.show3?"收起":"展开")+" "),a("i",{class:[t.show3?"el-icon-arrow-up":"el-icon-arrow-down"],staticStyle:{"font-weight":"bolder"}})])],1),a("el-collapse-transition",[a("el-main",{directives:[{name:"show",rawName:"v-show",value:t.show3,expression:"show3"}],staticClass:"card-content"},[a("div",{staticClass:"form-titles"},[t._v("产品参数")]),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[t.form.goodsParams[0]?a("el-form-item",[a("template",{slot:"label"},[a("font",{attrs:{color:"red"}},[t._v("*")]),t._v(" "+t._s(t.form.goodsParams[0].key)+" ")],1),a("el-input",{staticStyle:{width:"150px"},attrs:{size:"medium"},model:{value:t.form.goodsParams[0].value,callback:function(e){t.$set(t.form.goodsParams[0],"value",e)},expression:"form.goodsParams[0].value"}})],2):t._e(),t.form.goodsParams[1]?a("el-form-item",[a("template",{slot:"label"},[a("font",{attrs:{color:"red"}},[t._v("*")]),t._v(" "+t._s(t.form.goodsParams[1].key)+" ")],1),a("el-input",{staticStyle:{width:"150px"},attrs:{size:"medium"},model:{value:t.form.goodsParams[1].value,callback:function(e){t.$set(t.form.goodsParams[1],"value",e)},expression:"form.goodsParams[1].value"}})],2):t._e(),t.form.goodsParams.length<10?a("el-form-item",[t.goodsParamsNew.length<10?a("el-button",{attrs:{size:"medium",type:"primary",icon:"el-icon-plus"},on:{click:function(e){return e.preventDefault(),t.addGoodsParams(e)}}},[t._v("添加自定义产品参数")]):t._e()],1):t._e()],1),t.goodsParamsNew.length?a("div",{staticClass:"goodsParams"},t._l(t.goodsParamsNew,(function(e,r){return a("div",{key:r,staticClass:"goodsParams-content"},[a("el-form-item",[a("template",{slot:"label"},[t._v(" 参数名称 ")]),a("el-input",{staticStyle:{width:"150px"},model:{value:e.key,callback:function(a){t.$set(e,"key",a)},expression:"item.key"}})],2),a("el-form-item",[a("template",{slot:"label"},[t._v(" 参数值 ")]),a("el-input",{staticStyle:{width:"150px"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}}),a("el-button",{staticStyle:{"margin-left":"40px"},attrs:{size:"small",type:"info"},on:{click:function(a){return t.delGoodsParams(e)}}},[t._v(" 删除 ")])],2)],1)})),0):t._e(),a("editor",{attrs:{content:t.form.goodsInfo,layout:t.editLayout},on:{"update:content":function(e){return t.$set(t.form,"goodsInfo",e)}}})],1)],1)],1),a("el-card",{staticClass:"box-card",attrs:{shadow:"never","body-style":"border: 0;"}},[a("div",{staticClass:"from-layout-title",attrs:{slot:"header"},slot:"header"},[a("div",[t._v("服务详情")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){t.show3=!t.show3}}},[t._v(" "+t._s(t.show3?"收起":"展开")+" "),a("i",{class:[t.show3?"el-icon-arrow-up":"el-icon-arrow-down"],staticStyle:{"font-weight":"bolder"}})])],1),a("el-collapse-transition",[a("el-main",{directives:[{name:"show",rawName:"v-show",value:t.show3,expression:"show3"}],staticClass:"card-content"},[a("editor",{attrs:{content:t.form.serviceContent,layout:t.editLayout},on:{"update:content":function(e){return t.$set(t.form,"serviceContent",e)}}})],1)],1)],1),a("el-form-item",{staticClass:"from-operation"},[t.isEdit?t._e():a("el-button",{attrs:{type:"info",disabled:t.isDraft,loading:t.isDraft},on:{click:function(e){return t.save("goodsForm",t.Draft)}}},[t._v(" 存为草稿 ")]),a("el-button",{attrs:{type:"primary",disabled:t.isRelease,loading:t.isRelease},on:{click:function(e){return t.save("goodsForm",t.Release)}}},[t._v("保存并发布")])],1)],1)],1),a("el-dialog",{staticClass:"goodsInfoView-box",attrs:{title:"商品详情预览",fullscreen:"",visible:t.dialogVisible,width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"goodsInfoView-content",domProps:{innerHTML:t._s(t.form.goodsInfo)}})])],1)},o=[],i=(a("a4d3"),a("e01a"),a("a623"),a("4de4"),a("4160"),a("c975"),a("fb6a"),a("45fc"),a("b0c0"),a("e439"),a("dbb4"),a("b64b"),a("d3b7"),a("e25e"),a("ac1f"),a("5319"),a("498a"),a("159b"),a("ddb0"),a("96cf"),a("89ba")),n=a("2fa7"),s=a("2f62"),c=a("310e"),l=a.n(c),u=a("3828"),d=a("0b54"),f=a("5488"),m=a.n(f),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"layout"},[a("div",{staticClass:"specifications-set"},[this.specificationsData.length<2&&!t.isEdit?a("div",{staticClass:"type-sub"},[a("div",{staticClass:"red"},[t._v("*")]),a("el-button",{attrs:{size:"medium",type:"primary",icon:"el-icon-plus"},on:{click:t.addSpecifications}},[t._v("添加规格")])],1):t._e(),a("div",{staticClass:"min-scrollbar"},[t._l(t.specificationsData,(function(e,r){return[a("div",{key:r,staticClass:"tag-list"},[a("div",{staticClass:"tag-item name"},[a("el-form-item",{attrs:{label:"规格名称"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"medium"},model:{value:e.specifications,callback:function(a){t.$set(e,"specifications",a)},expression:"item.specifications"}},[t.isEdit?t._e():a("el-button",{attrs:{slot:"suffix",type:"text",icon:"el-icon-error"},on:{click:function(a){return t.delSpecifications(e)}},slot:"suffix"})],1)],1)],1),a("div",{staticClass:"type-list"},[t._l(e.type,(function(r){return a("div",{key:r.id,staticClass:"tag-item"},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"medium"},model:{value:r.name,callback:function(e){t.$set(r,"name",e)},expression:"type.name"}},[r.isNew?a("el-button",{attrs:{slot:"suffix",type:"text",size:"medium",icon:"el-icon-error"},on:{click:function(a){return t.delType(r,e)}},slot:"suffix"}):t._e()],1)],1)})),e.type.length<10?a("div",{staticClass:"tag-item"},[a("el-button",{attrs:{size:"medium",icon:"el-icon-plus"},on:{click:function(a){return t.addType(e)}}},[t._v("添加规格值")])],1):t._e()],2)])]})),this.specificationsData.length?a("div",{staticClass:"type-sub"},[a("el-button",{staticClass:"save",attrs:{type:"primary",title:"点击保存并生成规格明细"},on:{click:t.saveData}},[t._v("保存")])],1):t._e()],2),t.tableData.length?a("main",{staticClass:"specifications-table"},[a("div",{staticClass:"table-title"},[t._v(" 规格明细 ")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","max-height":"400",size:"mini"}},[t._l(t.headData,(function(e,r){return a("el-table-column",{key:e+r,attrs:{label:e},scopedSlots:t._u([{key:"default",fn:function(r){return[a("span",[t._v(t._s(r.row[e]))])]}}],null,!0)})})),a("el-table-column",{attrs:{label:"原价"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input-number",{staticStyle:{width:"100%"},attrs:{size:"mini","controls-position":"right",precision:2,step:.1,min:.01,max:99999},model:{value:e.row.showPrice,callback:function(a){t.$set(e.row,"showPrice",a)},expression:"scope.row.showPrice"}})]}}],null,!1,3427269317)}),a("el-table-column",{attrs:{label:"售价"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input-number",{staticStyle:{width:"100%"},attrs:{size:"mini","controls-position":"right",precision:2,step:.1,min:.01,max:99999},model:{value:e.row.costPrice,callback:function(a){t.$set(e.row,"costPrice",a)},expression:"scope.row.costPrice"}})]}}],null,!1,3501281805)}),a("el-table-column",{attrs:{label:"当前库存"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input-number",{staticStyle:{width:"100%"},attrs:{size:"mini","controls-position":"right","step-strictly":"",type:"number",min:1,max:99999},model:{value:e.row.count,callback:function(a){t.$set(e.row,"count",a)},expression:"scope.row.count"}})]}}],null,!1,3926023397)}),a("el-table-column",{attrs:{label:"商品编码"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",min:1,max:30},model:{value:e.row.snCode,callback:function(a){t.$set(e.row,"snCode",a)},expression:"scope.row.snCode"}})]}}],null,!1,3072630137)}),a("el-table-column",{attrs:{label:"图片(750*750,<1MB)"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("image-upload",{attrs:{width:"50px",height:"50px",isShowTip:!1,image:e.row.cover},on:{"update:image":function(a){return t.$set(e.row,"cover",a)}}})]}}],null,!1,1687571488)}),t.isEdit?a("el-table-column",{attrs:{label:"状态",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.statusName)+" ")]}}],null,!1,3505772878)}):t._e(),t.isEdit?a("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isNew?[t._v("-")]:a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.changeStatus(e.row)}}},[t._v(" "+t._s(3===e.row.status?"下架":"上架")+" ")])]}}],null,!1,3222309392)}):t._e()],2)],1):t._e(),t.tableData.length?a("main",{staticClass:"specifications-table"},[a("div",{staticClass:"table-title"},[t._v(" 总库存 ")]),a("div",{},[t._v(t._s(t.total))])]):t._e()])])},h=[],g=(a("d28b"),a("d81d"),a("3ca3"),a("f828")),v={name:"GoodsSpecifications",props:{isEdit:{type:Boolean,default:!1},options:{type:Array,default:function(){return[]}},sku:{type:Array,default:function(){return[]}}},components:{imageUpload:g["a"]},data:function(){return{total:0,tableData:[],headData:[],priceList:[],specificationsData:[]}},watch:{options:{handler:function(t){t&&t.length&&(this.specificationsData=Object(u["d"])(t),this.headData=t.map((function(t){return t.specifications})))},immediate:!0},sku:{handler:function(t){t.length&&(this.tableData=Object(u["d"])(t))},deep:!0,immediate:!0},tableData:{handler:function(t){if(t.length){var e=0;this.priceList=t,t.forEach((function(t){return e+=t["count"]})),this.total=e}},deep:!0,immediate:!0}},methods:{changeStatus:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=3===e.status?4:3,this.$confirm("确定要".concat(3===a?"上架":"下架","sku？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){r.isLoading=!0,r.interceptorFn(Object(i["a"])(regeneratorRuntime.mark((function t(){var o,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["k"])({id:e.id,status:a});case 2:if(o=t.sent,i=o.code,n=o.msg,i===u["a"].success){t.next=8;break}return Object(u["j"])(r,n),t.abrupt("return");case 8:r.$set(e,"statusName",3===e.status?"已下架":"上架中"),r.$set(e,"status",a),Object(u["g"])(r,"操作成功");case 11:case"end":return t.stop()}}),t)}))))})).catch((function(){}));case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),isRepeat:function(t){var e={};for(var a in t){if(e[t[a]])return!0;e[t[a]]=!0}return!1},saveData:function(){var t=this.specificationsData,e=[],a=[],r=[];if(t.length){var o=!0,i=!1,n=void 0;try{for(var s,c=t[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var l=s.value;if(!l.specifications)return void Object(u["j"])(this,"规格名称不能为空");if(l.specifications.length>10)return void Object(u["j"])(this,"规格名称不能超过10个字符");if(!l.type.length)return void Object(u["j"])(this,"请至少给【".concat(l.specifications,"】规格添加一种类型"));var d=!0,f=!1,m=void 0;try{for(var p,h=l.type[Symbol.iterator]();!(d=(p=h.next()).done);d=!0){var g=p.value;if(!g.name)return void Object(u["j"])(this,"规格值不能为空");if(g.name.length>10)return void Object(u["j"])(this,"规格值不能超过10个字符")}}catch(W){f=!0,m=W}finally{try{d||null==h.return||h.return()}finally{if(f)throw m}}a.push(l.specifications)}}catch(W){i=!0,n=W}finally{try{o||null==c.return||c.return()}finally{if(i)throw n}}if(t[1]){var v=!0,b=!1,y=void 0;try{for(var w,k=t[1].type[Symbol.iterator]();!(v=(w=k.next()).done);v=!0){var O=w.value;r.push(O.name)}}catch(W){b=!0,y=W}finally{try{v||null==k.return||k.return()}finally{if(b)throw y}}}var _=!0,x=!1,P=void 0;try{for(var j,S=t[0].type[Symbol.iterator]();!(_=(j=S.next()).done);_=!0){var C=j.value;if(r.push(C.name),t[1]){var D=!0,I=!1,T=void 0;try{for(var E,L=t[1].type[Symbol.iterator]();!(D=(E=L.next()).done);D=!0){var $=E.value,N={};if($.name&&C.name){var R=C.name+"-"+$.name;if(this.priceList.length){var z=!0,G=!1,A=void 0;try{for(var F,q=this.priceList[Symbol.iterator]();!(z=(F=q.next()).done);z=!0){var V=F.value;if(V.uid===R){N["showPrice"]=V.showPrice,N["costPrice"]=V.costPrice,N["count"]=V.count,N["snCode"]=V.snCode,N["snstatusNameCode"]=V.statusName||"-",N["cover"]=V.cover;break}N["showPrice"]=1,N["costPrice"]=1,N["count"]=1,N["snCode"]="",N["cover"]="",N["statusName"]="-",N["isNew"]=!0}}catch(W){G=!0,A=W}finally{try{z||null==q.return||q.return()}finally{if(G)throw A}}}else N["showPrice"]=1,N["costPrice"]=1,N["count"]=1,N["snCode"]="",N["statusName"]="-",N["cover"]="",N["isNew"]=!0;N[t[0].specifications]=C.name,N[t[1].specifications]=$.name,N.uid=R,N.valueList=[C.name,$.name],e.push(N)}}}catch(W){I=!0,T=W}finally{try{D||null==L.return||L.return()}finally{if(I)throw T}}}else{var B={},M=C.name;if(!C.name)return;if(B[t[0].specifications]=C.name,B.uid=M,B.valueList=[M],this.priceList.length){var U=!0,J=!1,K=void 0;try{for(var H,Y=this.priceList[Symbol.iterator]();!(U=(H=Y.next()).done);U=!0){var Q=H.value;if(Q.uid===M){B["showPrice"]=Q.showPrice,B["costPrice"]=Q.costPrice,B["count"]=Q.count,B["snCode"]=Q.snCode,B["cover"]=Q.cover,B["statusName"]=Q.statusName||"-";break}B["showPrice"]=1,B["costPrice"]=1,B["count"]=1,B["snCode"]="",B["statusName"]="-",B["cover"]="",B["isNew"]=!0}}catch(W){J=!0,K=W}finally{try{U||null==Y.return||Y.return()}finally{if(J)throw K}}}else B["showPrice"]=1,B["costPrice"]=1,B["count"]=1,B["snCode"]="",B["statusName"]="-",B["cover"]="",B["isNew"]=!0;e.push(B)}}}catch(W){x=!0,P=W}finally{try{_||null==S.return||S.return()}finally{if(x)throw P}}this.isRepeat(r)?Object(u["j"])(this,"规格值不能重复，请重新输入"):(this.tableData=e,this.headData=a,this.$emit("update:options",this.specificationsData))}else Object(u["j"])(this,"请先添加规格")},delType:function(t,e){e.type=e.type.filter((function(e){return e.id!==t.id}))},delSpecifications:function(t){this.specificationsData=this.specificationsData.filter((function(e){return e.id!==t.id})),this.tableData=[],this.headData=[]},addType:function(t){t.type.length>=10?Object(u["j"])(this,"规格最多只能添加10种"):t.type.push({name:"",id:Object(u["i"])(),isNew:!0})},addSpecifications:function(){this.specificationsData.length>=2?Object(u["j"])(this,"规格最多只能添加两种"):this.specificationsData.push({specifications:"",id:Object(u["i"])(),type:[{name:"",id:Object(u["i"])()}]})}}},b=v,y=(a("d49b"),a("2877")),w=Object(y["a"])(b,p,h,!1,null,"6baef1c7",null),k=w.exports,O=a("156b"),_=a("45b8"),x=a("8fdf");function P(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function j(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?P(a,!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):P(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var S={name:"CreateGoods",data:function(){var t=function(t,e,a){""===e?a(new Error("请输入价格")):e<=0||!/^[0-9]+(.[0-9]{1,5})?$/.test(e)?a(new Error("价格不合法，请重新输入")):e>99999?a(new Error("价格不合法，请重新输入")):a()},e=function(t,e,a){if(!e)return a(new Error("重量不能为空"));e<=0||!/^[0-9]+(.[0-9]{1,5})?$/.test(e)?a(new Error("重量不合法，请重新输入")):e>9999?a(new Error("重量不合法，请重新输入")):a()},a=function(t,e,a){if(!e.length)return a(new Error("请选择商品标签"));a()};return{Draft:u["a"].goodsDraft,Release:u["a"].goodsRelease,goodsGroup:[],goodsCategoryList:[],show1:!0,show2:!0,show3:!0,drag:!1,transf:[{name:"包邮",id:1}],form:{category:"",name:"",costPrice:"",showPrice:"",description:"",serviceContent:"",freightId:"",weight:"",temporaryImgList:[],imgList:[],tags:[],video:"",specificationsData:[],goodsInfo:"",goodsParams:[{key:"品牌",value:""},{key:"型号",value:""}],sku:[]},loading:!1,faceList:[],editorContent:"",FILE_TYPE_AVATAR:"1",SUCC_CODE:"0",ERR_TOKEN_CODE:"4",rules:{name:[{required:!0,message:"请输入商品名称",trigger:["change"]},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"change"}],category:[{required:!0,message:"请选择商品分类",trigger:"change"}],freightId:[{required:!0,message:"请选择运费模板",trigger:"change"}],costPrice:[{validator:t,trigger:"change"}],showPrice:[{validator:t,trigger:"change"}],tags:[{validator:a,trigger:"change"}],weight:[{validator:e,trigger:"change"}]},isDraft:!1,isRelease:!1,goodsInfoOrigin:{},dialogVisible:!1,isLoading:!1,editLayout:{width:"100%",height:"400px"}}},components:{draggable:l.a,CollapseTransition:m.a,GoodsSpecifications:k,editor:O["a"],imageUpload:g["a"]},created:function(){this.getGoodsInfoData(),this.getGoodsCategoryList(),this.getGoodsGroup()},computed:j({},Object(s["c"])(["user","aliyunOss"]),{isEdit:function(){return Boolean(this.routeData.query.goodsId)},routeData:function(){return this.$route},dragOptions:function(){return{animation:500,group:"description",disabled:!1,ghostClass:"ghost"}},goodsParamsNew:function(){return this.form.goodsParams.length>=3?this.form.goodsParams.slice(2):[]}}),methods:{getGoodsInfoData:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,r,o,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.routeData.query,e.goodsId){t.next=3;break}return t.abrupt("return");case 3:return this.isLoading=!0,t.next=6,Object(d["c"])({id:e.goodsId});case 6:if(a=t.sent,a.code===u["a"].success){t.next=10;break}return Object(u["c"])(this,a.msg),t.abrupt("return");case 10:this.goodsInfoOrigin=Object(u["d"])(a.result.goods),r=a.result.goods,o=[],i=[],r.options.list.forEach((function(t){var e=[];t.values.forEach((function(t){e.push({name:t,id:Object(u["i"])()})})),i.push({specifications:t.key,id:Object(u["i"])(),type:e})})),r.skus.forEach((function(t){var e={},a="",r=[];t.options.list.forEach((function(t){e[t.key]=t.value,r.push(t.value),a+=t.value+"-"})),e["showPrice"]=Object(u["e"])(parseInt(t.showPrice)),e["costPrice"]=Object(u["e"])(parseInt(t.costPrice)),e["count"]=parseInt(t.totalStockNum),e["snCode"]=t.snCode,e["cover"]=t.cover,e["statusName"]=t.statusName,e["status"]=t.status,e["id"]=t.id,e.uid=a.substring(0,a.length-1),e.valueList=r,o.push(e)})),n=function(){var t=[];return r.tags.forEach((function(e){t.push(e.id)})),t},this.form={category:r.classId,description:r.description,serviceContent:r.serviceContent,freightId:parseInt(r.freightId),weight:r.weight,name:r.name,showPrice:Object(u["e"])(r.showPrice),costPrice:Object(u["e"])(r.costPrice),imgList:r.pictures.list,temporaryImgList:r.pictures.list,video:r.video,specificationsData:i,goodsParams:r.extraInfo.list,tags:n(),sku:o},this.$set(this.form,"goodsInfo",r.details),this.$set(this.form,"id",this.routeData.query.goodsId),this.isLoading=!1;case 21:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getGoodsCategoryList:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(_["a"])({isAll:!0});case 2:e=t.sent,e.code===u["a"].success&&(a=function t(e){e.length&&e.forEach((function(e){e.children.length?t(e.children):delete e.children}))},a(this.goodsCategoryList=e.result.list));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getGoodsGroup:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(x["g"])(void 0,void 0,!0);case 2:e=t.sent,e.code===u["a"].success&&(this.goodsGroup=e.result.list);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),delGoodsParams:function(t){this.form.goodsParams=this.form.goodsParams.filter((function(e){return t.uid!==e.uid}))},addGoodsParams:function(){this.form.goodsParams.push({uid:Object(u["i"])(),key:"",value:""})},save:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,a){var r,o,n,s,c,l,f=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.form.type=a,r=Object(u["d"])(this.form),o=this.$refs.specificationsData.tableData,n=[],s=[],r.specificationsData.forEach((function(t){var e=[];t.type.forEach((function(t){e.push(t.name)})),s.push({key:t.specifications,values:e})})),o.forEach((function(t){var e=[],a=t.valueList,r=function(r){var o={};a.forEach((function(a){t[r]===a&&"uid"!==r&&(o.key=r,o.value=a,e.push(o))}))};for(var o in t)r(o);n.push({showPrice:Object(u["f"])(t.showPrice),costPrice:Object(u["f"])(t.costPrice),totalStockNum:t.count,snCode:t.snCode,cover:t.cover,options:{list:e||[]}})})),c=function(t){var e=[];return t&&t.length&&f.goodsGroup.forEach((function(a){t.indexOf(a.id)>=0&&e.push(a)})),e},l=r.goodsParams.every((function(t){return t.value&&t.key&&t.value.length<20&&t.key.length<20})),this.$refs[e].validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var i,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a!==f.Draft||r.name.length){t.next=5;break}return Object(u["j"])(f,"请输入商品名称"),t.abrupt("return",!1);case 5:if(a!==f.Release){t.next=32;break}if(e){t.next=9;break}return Object(u["j"])(f,"商品信息不完整，请填写相关信息"),t.abrupt("return",!1);case 9:if(f.form.imgList.length){t.next=12;break}return Object(u["j"])(f,"请上传商品主图"),t.abrupt("return",!1);case 12:if(f.form.specificationsData.length){t.next=15;break}return Object(u["j"])(f,"请添加商品规格"),t.abrupt("return",!1);case 15:if(!n.some((function(t){return!t.snCode.trim()}))){t.next=18;break}return Object(u["j"])(f,"请完善规格明细：商品编码不能为空"),t.abrupt("return",!1);case 18:if(r.freightId){t.next=21;break}return Object(u["j"])(f,"请选择运费模板"),t.abrupt("return",!1);case 21:if(o.length){t.next=24;break}return Object(u["j"])(f,"请保存商品规格并填写规格详细"),t.abrupt("return",!1);case 24:if(r.goodsInfo.trim().length){t.next=27;break}return Object(u["j"])(f,"请填写商品详情"),t.abrupt("return",!1);case 27:if(l){t.next=30;break}return Object(u["j"])(f,"自定义参数不能为空1到20字符"),t.abrupt("return",!1);case 30:t.next=33;break;case 32:console.info("存草稿",r);case 33:return a===f.Draft?f.isDraft=!0:f.isRelease=!0,i={goods:{id:r.id||void 0,name:r.name,classId:r.category,showPrice:Object(u["f"])(Object(u["h"])(r.showPrice)),costPrice:Object(u["f"])(Object(u["h"])(r.costPrice)),pictures:{list:r.imgList||[]},video:r.video||void 0,details:r.goodsInfo,status:r.type,totalStockNum:r.totalStockNum,description:r.description,serviceContent:r.serviceContent,freightId:r.freightId,weight:parseInt(r.weight),tags:c(r.tags),options:{list:s||[]},extraInfo:{list:r.goodsParams||[]},skus:n||[]}},t.next=37,Object(d["a"])(i);case 37:if(m=t.sent,setTimeout((function(){f.isDraft=!1,f.isRelease=!1}),500),m.code===u["a"].success){t.next=42;break}return Object(u["c"])(f,m.msg),t.abrupt("return");case 42:return Object(u["g"])(f,"".concat(r.id?"编辑成功":"创建成功")),t.next=45,f.$router.replace(f.routeData.query.path_);case 45:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 10:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}()}},C=S,D=C,I=(a("8e5c"),a("2b34"),Object(y["a"])(D,r,o,!1,null,"9c94970e",null));e["default"]=I.exports},d28b:function(t,e,a){var r=a("746f");r("iterator")},d49b:function(t,e,a){"use strict";var r=a("c51d"),o=a.n(r);o.a},d81d:function(t,e,a){"use strict";var r=a("23e7"),o=a("b727").map,i=a("1dde");r({target:"Array",proto:!0,forced:!i("map")},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},fb6a:function(t,e,a){"use strict";var r=a("23e7"),o=a("861d"),i=a("e8b5"),n=a("23cb"),s=a("50c4"),c=a("fc6a"),l=a("8418"),u=a("1dde"),d=a("b622"),f=d("species"),m=[].slice,p=Math.max;r({target:"Array",proto:!0,forced:!u("slice")},{slice:function(t,e){var a,r,u,d=c(this),h=s(d.length),g=n(t,h),v=n(void 0===e?h:e,h);if(i(d)&&(a=d.constructor,"function"!=typeof a||a!==Array&&!i(a.prototype)?o(a)&&(a=a[f],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return m.call(d,g,v);for(r=new(void 0===a?Array:a)(p(v-g,0)),u=0;g<v;g++,u++)g in d&&l(r,u,d[g]);return r.length=u,r}})}}]);
//# sourceMappingURL=chunk-1ec43a19.production.1582706353542.js.map