(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2bb64f78"],{8583:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticClass:"goods-group-container"},[n("el-header",{staticClass:"layout-title-box",attrs:{height:"50px"}},[n("div",{staticClass:"titles"},[e._v(e._s(e.route.meta.title))]),n("div",{staticClass:"operation"},[n("el-button",{attrs:{size:"medium",type:"primary",icon:"el-icon-refresh"},on:{click:e.getTableData}},[e._v("刷新表格 ")]),n("el-button",{attrs:{size:"medium",type:"primary",icon:"el-icon-plus"},on:{click:e.addGroup}},[e._v("新增标签 ")])],1)]),n("el-main",{staticClass:"layout-content"},[n("el-card",{attrs:{shadow:"never","body-style":"border: 0;"}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticStyle:{width:"100%"},attrs:{"header-row-class-name":"goodsTable",data:e.tableData,size:"medium"}},[n("el-table-column",{attrs:{prop:"name",label:"商品标签名称"}}),n("el-table-column",{attrs:{prop:"goodsCount","class-name":"fontCenter",label:"商品数量"}}),n("el-table-column",{attrs:{prop:"id",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.handleEdit(t.row,t.$index)}}},[e._v("编辑")]),n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.goConfig(t.row)}}},[e._v("配置")]),n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.handleDelete(t.row,t.$index)}}},[e._v("删除")])]}}])})],1)],1),n("div",{staticClass:"content-pagination"},[n("el-pagination",{attrs:{background:"","current-page":e.page,"page-sizes":e.pageSizes,"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},r=[],i=(n("d81d"),n("b0c0"),n("a9e3"),n("96cf"),n("89ba")),o=n("3828"),c=n("8fdf"),u=n("2b0e"),s={created:function(){this.getTableData()},data:function(){return{tableData:[],activeData:{},weightData:[],showButton:!1,page:1,pageSize:10,isLoading:!1,pageSizes:JSON.parse("[10, 20, 50, 100]"),count:0}},methods:{getTableData:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,Object(c["g"])(this.page,this.pageSize);case 3:t=e.sent,n=t.code,a=t.msg,r=t.result,n===o["a"].success?(this.tableData=r.list,this.weightData=this.tableData.map((function(e){return e.rank})),this.count=r.count):n!==o["a"].tokenError&&Object(o["c"])(this,a),this.isLoading=!1;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),goConfig:function(e){var t=this;this.interceptorFn((function(){t.$router.push({path:"/goodsGroup/configGroup",query:{id:e.id,name:e.name,breadTitle:t.route.meta.title}})}))},setWeight:function(e){this.activeData=e,this.showButton=!0},handleClearWeight:function(e,t){u["default"].set(this.weightData,t,e.rank),this.showButton=!1},handleSetWeight:function(e,t){var n=this;this.interceptorFn(Object(i["a"])(regeneratorRuntime.mark((function a(){var r,i,s,d,l,p;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=/^\d+$/,i=n.weightData[t],!r.test(i)){a.next=14;break}if(i===n.tableData[t].rank){a.next=11;break}return n.tableData[t].rank=i,s={id:Number(n.activeData.id),rank:Number(i),name:e.name},a.next=8,Object(c["d"])(s);case 8:d=a.sent,l=d.code,p=d.msg,l===o["a"].success?(Object(o["g"])(n,"设置成功"),n.page=1,n.getTableData()):l!==o["a"].tokenError&&Object(o["c"])(n,p);case 11:n.showButton=!1,a.next=16;break;case 14:Object(o["c"])(n,"请输入正确值"),u["default"].set(n.weightData,t,e.rank);case 16:case"end":return a.stop()}}),a)}))))},addGroup:function(){var e=this;this.$prompt("标签名称：","新增标签",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputValidator:this.editName,confirmButtonClass:"",inputErrorMessage:"分类名称不能为空",beforeClose:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n,a,r){var i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("confirm"!==n){t.next=8;break}return i={name:a.inputValue},t.next=4,e.changeGoodsGroup(i);case 4:o=t.sent,o&&r(),t.next=9;break;case 8:r();case 9:case"end":return t.stop()}}),t)})));function n(e,n,a){return t.apply(this,arguments)}return n}()}).then((function(){Object(o["g"])(e,"添加成功"),e.page=1,e.getTableData()})).catch((function(){}))},changeGoodsGroup:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["d"])(t);case 2:if(n=e.sent,a=n.code,r=n.msg,a!==o["a"].success){e.next=8;break}return e.abrupt("return",!0);case 8:a!==o["a"].tokenError&&Object(o["c"])(this,r);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleEdit:function(e,t){var n=this;this.$prompt("标签名称：","编辑标签",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:e.name,inputPattern:/\S/,inputValidator:this.editName,confirmButtonClass:"",inputErrorMessage:"分类名称不能为空",beforeClose:function(a,r,o){n.interceptorFn(Object(i["a"])(regeneratorRuntime.mark((function i(){var c,u,s,d;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if("confirm"!==a){i.next=14;break}if(c=e.name,u=r.inputValue,u!==c){i.next=7;break}o(),i.next=12;break;case 7:return s={id:Number(e.id),name:u,rank:e.rank},i.next=10,n.changeGoodsGroup(s);case 10:d=i.sent,d&&(n.tableData[t].name=u,o());case 12:i.next=15;break;case 14:o();case 15:case"end":return i.stop()}}),i)}))))}}).then((function(){Object(o["g"])(n,"编辑成功")})).catch((function(){}))},editName:function(e){if(e.length>10)return"不能超过10个字符"},handleDelete:function(e){var t=this;this.$confirm("确定删除该标签吗","删除标签",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){t.interceptorFn(Object(i["a"])(regeneratorRuntime.mark((function n(){var a,r,i,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=Number(e.id),n.next=3,Object(c["c"])(a);case 3:r=n.sent,i=r.code,u=r.msg,i===o["a"].success?(Object(o["g"])(t,"删除成功"),t.getTableData()):i!==o["a"].tokenError&&Object(o["c"])(t,u);case 6:case"end":return n.stop()}}),n)}))))})).catch((function(){}))},handleSizeChange:function(e){this.pageSize=e,this.page=1,this.getTableData()},handleCurrentChange:function(e){this.page=e,this.getTableData()}},computed:{route:function(){return this.$route}}},d=s,l=(n("d6ec"),n("2877")),p=Object(l["a"])(d,a,r,!1,null,"5ead2fd4",null);t["default"]=p.exports},"8fdf":function(e,t,n){"use strict";n.d(t,"g",(function(){return r})),n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"f",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return d}));n("b0c0");var a=n("4279"),r=function(e,t,n){return Object(a["a"])("/api/mall/manager/goods/group/list",{page:e,pageSize:t,isAll:n},"POST")},i=function(e){var t=e.id,n=e.name,r=e.rank;return Object(a["a"])("/api/mall/manager/goods/group/put",{id:t,name:n,rank:r},"POST")},o=function(e){return Object(a["a"])("/api/mall/manager/goods/group/delete",{id:e},"POST")},c=function(e,t,n){return Object(a["a"])("/api/mall/manager/goods/info/list",{page:e,pageSize:t,groupId:n},"POST")},u=function(e){var t=e.name,n=e.includeGroupId,r=e.groupId,i=e.page,o=e.pageSize;return Object(a["a"])("/api/mall/manager/goods/group/searchGoods",{name:t,includeGroupId:n,groupId:r,page:i,pageSize:o},"POST")},s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(a["a"])("/api/mall/manager/goods/group/inOutGoods",{goodsIds:e,groupId:t,isOut:n},"POST")},d=function(e){var t=e.goodsId,n=e.groupId,r=e.rank;return Object(a["a"])("/api/mall/manager/goods/group/updateGoodsRank",{goodsId:t,groupId:n,rank:r},"POST")}},d6ec:function(e,t,n){"use strict";var a=n("d7da"),r=n.n(a);r.a},d7da:function(e,t,n){},d81d:function(e,t,n){"use strict";var a=n("23e7"),r=n("b727").map,i=n("1dde");a({target:"Array",proto:!0,forced:!i("map")},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-2bb64f78.production.1582706353542.js.map