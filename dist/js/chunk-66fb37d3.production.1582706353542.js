(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66fb37d3"],{"04d1":function(t,e,a){},"45b8":function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return o}));a("b0c0");var n=a("4279"),r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])("/api/mall/manager/goods/class/list",{isAll:t.isAll,token:t.token,page:t.page,pageSize:t.pageSize,name:t.name,id:t.id},"POST")},i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])("/api/mall/manager/goods/class/put",{item:{fatherId:t.fatherId,name:t.name,rank:t.rank,id:t.id}},"POST")},o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])("/api/mall/manager/goods/class/updateStatus",{id:t.id,status:t.status},"POST")}},"9f62":function(t,e,a){"use strict";var n=a("04d1"),r=a.n(n);r.a},baef:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{staticClass:"layout"},[a("el-header",{staticClass:"layout-title-box",attrs:{height:"50px"}},[a("div",{staticClass:"titles"},[t._v(t._s(t.route.meta.title))]),a("div",{staticClass:"operation"},[a("el-button",{attrs:{size:"medium",type:"primary",icon:"el-icon-refresh"},on:{click:t.getGoodsCategoryList}},[t._v("刷新表格")])],1)]),a("el-main",{staticClass:"layout-content"},[a("el-card",{attrs:{shadow:"never","body-style":"border: 0;"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticStyle:{width:"100%"},attrs:{"tree-props":{children:"children"},"row-key":"id","header-row-class-name":"goodsTable",data:t.tableData,size:"medium"}},[a("el-table-column",{attrs:{prop:"name",label:"商品分类名称","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"rank",label:"排序"}}),a("el-table-column",{attrs:{prop:"statusName",label:"显示状态"}}),a("el-table-column",{attrs:{prop:"address",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.level?a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.changeGoodsCategory(e.row)}}},[t._v("新增子类")]):t._e(),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.changeGoodsCategory(e.row,"edit")}}},[t._v("编辑")]),1===e.row.status?a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.updateStatus(e.row,2)}}},[t._v("下架")]):a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.updateStatus(e.row,1)}}},[t._v("上架")])]}}])})],1)],1)],1)],1)},r=[],i=(a("99af"),a("b0c0"),a("e25e"),a("96cf"),a("89ba")),o=a("3828"),s=a("45b8"),c={name:"index",data:function(){return{pageSizes:JSON.parse("[10, 20, 50, 100]"),status:{success:parseInt("0"),tokenError:parseInt("4")},isLoading:!1,tableData:[],filter:{searchKey:"",category:""},page:{currentPage:1,pageSize:10,total:0}}},computed:{route:function(){return this.$route}},methods:{getGoodsCategoryList:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.isLoading=!0,t.next=3,s["a"]({isAll:!0});case 3:if(e=t.sent,this.isLoading=!1,e.code===o["a"].success){t.next=8;break}return o["c"](this,e.msg),t.abrupt("return");case 8:this.page.total=e.result.count,this.tableData=e.result.list;case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleCurrentChange:function(t){this.page.currentPage=t,this.getGoodsCategoryList()},handleSizeChange:function(t){this.page.currentPage=1,this.page.pageSize=t,this.getGoodsCategoryList()},editName:function(t){if(t.length>10)return"分类名称不能超过10个字符"},changeGoodsCategory:function(t,e){var a=this,n=Boolean("edit"===e);this.$prompt("分类名称：","".concat(n?"编辑":"新增","分类"),{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputValidator:this.editName,inputValue:n?t.name:void 0,inputErrorMessage:"分类名称不能为空",beforeClose:function(e,r,c){if("confirm"===e){var u=t.name,l=r.inputValue;l===u?c():a.interceptorFn(Object(i["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a.isLoading=!0,e.next=3,s["b"]({fatherId:n?t.fatherId:t.id,rank:t.rank,name:l,id:n?t.id:void 0});case 3:if(r=e.sent,a.isLoading=!1,r.code===o["a"].success){e.next=8;break}return o["c"](a,r.msg),e.abrupt("return");case 8:c(),a.getGoodsCategoryList();case 10:case"end":return e.stop()}}),e)}))))}else c()}}).then((function(t){t.value;o["g"](a,n?"编辑成功":"创建成功")})).catch((function(){}))},updateStatus:function(t,e){var a=this,n=1===e?"上架":"下架";this.$confirm("确定要".concat(n,"分类【").concat(t.name,"】？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",beforeClose:function(n,r,c){"confirm"===n?a.interceptorFn(Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a.isLoading=!0,n.next=3,s["c"]({id:t.id,status:e});case 3:if(r=n.sent,a.isLoading=!1,r.code===a.status.success){n.next=8;break}return o["c"](a,r.msg),n.abrupt("return");case 8:c(),a.getGoodsCategoryList();case 10:case"end":return n.stop()}}),n)})))):c()}}).then((function(){o["g"](a,"操作成功")})).catch((function(){}))}},created:function(){this.getGoodsCategoryList()}},u=c,l=(a("9f62"),a("2877")),d=Object(l["a"])(u,n,r,!1,null,"0bb87cb0",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-66fb37d3.production.1582706353542.js.map